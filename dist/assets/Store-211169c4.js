import{u as N,h as S,e as j,c as h,i as B,j as $,w as R,o,a as c,b as e,d as a,t as i,F as y,r as k,k as u,l as d,m}from"./index-5abd09c0.js";import"./lodash-7d20a8ad.js";const V={class:"text-primary p-5"},F={class:"text-bold text-2xl"},I={key:0,class:"my-5 text-primary text-xl grid gap-5"},M={class:"text-3xl mb-5 text-center"},D={class:"grid gap-3"},E={class:"w-1/2 py-2"},L={class:"flex justify-between py-2"},O=["onClick"],T=e("i",{class:"fa-solid fa-minus"},null,-1),q=[T],z={class:"grow flex justify-center"},A={key:0},G=["onClick"],H=e("i",{class:"fa-solid fa-plus"},null,-1),J=[H],K={key:0},P={class:"w-1/2 py-2"},Q={class:"flex justify-between py-2"},U=["onClick"],W=e("i",{class:"fa-solid fa-minus"},null,-1),X=[W],Y={class:"grow flex justify-center"},Z={key:0},ee=["onClick"],te=e("i",{class:"fa-solid fa-plus"},null,-1),se=[te],ie={__name:"Store",setup(ne){const f=N(),_=S(),l=j(),v=h(()=>l.getters.store(Number(_.params.id))),r=B({items:[]}),C=h(()=>r.items.filter(s=>s.count<s.max).sort((s,t)=>s.name.localeCompare(t.name))),p=h(()=>r.items.filter(s=>s.count>=s.max).sort((s,t)=>s.name.localeCompare(t.name))),b=s=>{const t=r.items.find(n=>n.id==s.id);t.change>0&&t.change--},x=s=>{const t=r.items.find(n=>n.id==s.id);t.change++},w=()=>{const s=r.items.filter(t=>t.change>0).map(t=>(t.count+=t.change,delete t.change,t));l.dispatch("checkout",s),f.push("/kitty")};return $(()=>{if(l.state.ready){const s=l.getters.itemsByStore(Number(_.params.id));r.items=s.map(t=>({...t,change:0}))}}),R(()=>l.getters.isReady,()=>{const s=l.getters.itemsByStore(Number(_.params.id));r.items=s.map(t=>({...t,change:0}))}),(s,t)=>(o(),c("div",V,[e("div",F,[e("i",{class:"fa-solid fa-arrow-left",onClick:t[0]||(t[0]=n=>a(f).go(-1))})]),a(l).getters.isReady?(o(),c("div",I,[e("h1",M,i(a(v).name),1),e("div",D,[e("table",null,[e("tbody",null,[(o(!0),c(y,null,k(a(C),n=>(o(),c("tr",null,[e("td",E,i(n.name),1),e("td",L,[e("button",{type:"button",class:"focus:outline-none font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:d(g=>b(n),["stop"])},q,8,O),e("div",z,[m(i(n.count)+" ",1),n.change>0?(o(),c("span",A,"+"+i(n.change),1)):u("",!0),m(" / "+i(n.max),1)]),e("button",{type:"button",class:"focus:outline-none font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:d(g=>x(n),["stop"])},J,8,G)])]))),256))])]),a(p).length>0?(o(),c("hr",K)):u("",!0),e("table",null,[e("tbody",null,[(o(!0),c(y,null,k(a(p),n=>(o(),c("tr",null,[e("td",P,i(n.name),1),e("td",Q,[e("button",{type:"button",class:"focus:outline-none font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:d(g=>b(n),["stop"])},X,8,U),e("div",Y,[m(i(n.count)+" ",1),n.change>0?(o(),c("span",Z,"+"+i(n.change),1)):u("",!0),m(" / "+i(n.max),1)]),e("button",{type:"button",class:"focus:outline-none font-medium rounded-lg text-sm p-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:d(g=>x(n),["stop"])},se,8,ee)])]))),256))])])]),e("div",null,[e("button",{type:"button",class:"w-full text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-800 shadow-lg shadow-green-800/80 font-medium rounded-lg px-5 py-3 text-center mr-2 mb-2",onClick:w},"Check Out")])])):u("",!0)]))}};export{ie as default};
